//- ì´ íŒŒì¼ì€ indexë¥¼ ì œì™¸í•œ ëª¨ë“  í˜ì´ì§€ì—ì„œ í˜¸ì¶œ ë˜ë¯€ë¡œ ë”°ë¡œ 
//- ë³¸ íŒŒì¼ì— ëª…ì‹œëœ mixin ì€ ë”°ë¡œ í˜¸ì¶œ ì•ˆí•˜ì‹œê³  ê·¸ëƒ¥ ì“°ì‹œë©´ ë©ë‹ˆë‹¤.
//- í˜„ì¬ mixin ëª©ë¡ - (ê²Œì‹œíŒ ì“°ê¸° mixin, ê²Œì‹œíŒ ëª©ë¡ mixin, ì•„ì´ì½˜ mixin)

//- -----------------------------------------------------------------------------------------------------------------
//- ------------------------------------------- ì•„ì´ì½˜ ê´€ë ¨ mixin ---------------------------------------------------
//- -----------------------------------------------------------------------------------------------------------------
//- Icons
//- ì‚¬ìš©ë²•: 1. div í•˜ë‚˜ë¥¼ ìƒì„±í•˜ì—¬(ì¤‘ìš”) 'ê·¸ ì•ˆì—' icon mixin ì„ í˜¸ì¶œí•˜ê³ ,
//-         2. icon mixinì— ì›í•˜ëŠ” ì•„ì´ì½˜ì˜ ì´ë¦„ê³¼, title (img íƒœê·¸ì˜ alt ê°™ì€ ì—­í• ), ì›í•˜ëŠ” ìƒ‰ìƒì„ ì¸ìë¡œ ì „ë‹¬í•˜ê³ ,
//-             ex) +icon('close', 'ë‹«ê¸°', '#f5f5f5')
//-         3. css ì—ì„œ titleì„ ì§€ì •í•˜ê³ 
//-         4. í¬ê¸°ê°€ ë§˜ì— ì•ˆë“ ë‹¤ë©´ cssì—ì„œ divì˜ í¬ê¸°ë¥¼ ì¡°ì •í•˜ê³ 
//-         5. ì•„ì´ì½˜ ë‘ê»˜ë¥¼ ì¡°ì •í•˜ë ¤ë©´ cssì—ì„œ stroke-width ë¥¼ ì¡°ì ˆí•˜ì‹œë©´ ë©ë‹ˆë‹¤.
mixin icon(iconName, title, color)
  - const toggle = { close: "close" }
  - const chevron = { chevronForward: "chevronForward", chevronBackward: "chevronBackward", chevronDown: "chevronDown" }
  - const caret = { caretDown: "caretDown" }
  - const etc = { home: "home" , menu: "menu" }
  case iconName
    when toggle.close
      svg(xmlns='http://www.w3.org/2000/svg' viewBox='105 105 300 300')
        title= title
        path(fill='none' stroke= color stroke-linecap='round' stroke-linejoin='round' stroke-width='40' d='M368 368L144 144M368 144L144 368')
    when chevron.chevronForward
      svg(xmlns='http://www.w3.org/2000/svg' viewBox='105 105 300 300')
        title= title
        path(fill='none' stroke= color stroke-linecap='round' stroke-linejoin='round' stroke-width='32' d='M184 112l144 144-144 144')
    when chevron.chevronBackward
      svg(xmlns='http://www.w3.org/2000/svg' viewBox='105 105 300 300')
        title= title
        path(fill='none' stroke= color stroke-linecap='round' stroke-linejoin='round' stroke-width='32' d='M328 112L184 256l144 144')
    when chevron.chevronDown
      svg(xmlns='http://www.w3.org/2000/svg' viewBox='105 105 300 300')
        title= title
        path(fill='none' stroke= color stroke-linecap='round' stroke-linejoin='round' stroke-width='32' d='M112 184l144 144 144-144')
    when caret.caretDown
      svg(xmlns='http://www.w3.org/2000/svg' viewBox='91 91 330 330')
        title= title
        path(fill= color d='M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z')
    when etc.home
      svg(xmlns='http://www.w3.org/2000/svg' viewBox='25 25 480 480')
        title= title
        path(d='M80 212v236a16 16 0 0016 16h96V328a24 24 0 0124-24h80a24 24 0 0124 24v136h96a16 16 0 0016-16V212' fill='none' stroke= color stroke-linecap='round' stroke-linejoin='round' stroke-width='32')
        path(d='M480 256L266.89 52c-5-5.28-16.69-5.34-21.78 0L32 256M400 179V64h-48v69' fill='none' stroke= color stroke-linecap='round' stroke-linejoin='round' stroke-width='32')
    when etc.menu
      svg(xmlns='http://www.w3.org/2000/svg' viewbox='105 105 300 300')
        title= title
        path(fill='none' stroke= color stroke-linecap='round' stroke-miterlimit='10' stroke-width='40' d='M80 160h352M80 256h352M80 352h352')

    default
      p(style="color:red;") icon mixinì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì¸ì #{currentIcon}ì´(ê°€) ì „ë‹¬ë˜ì—ˆìŠµë‹ˆë‹¤.

//- sub-main í…œí”Œë¦¿ì˜ icon ê´€ë ¨ mixin
mixin sub-contents__item__icon(iconName)
  div.sub-contents__item__icon
    +icon(iconName, '', '#0f0f0f')

//- -----------------------------------------------------------------------------------------------------------------
//- ------------------------------------------- ê²Œì‹œíŒ ê´€ë ¨ mixin ---------------------------------------------------
//- -----------------------------------------------------------------------------------------------------------------
//- Bulletn Board Post Write Template [ ê²Œì‹œíŒ ê¸€ ì‘ì„± í…œí”Œë¦¿ ]
mixin postWrite(url)
  article.post-write
    form(action=`${url}` method="post" enctype="multipart/form-data").post-write__form
      .post-write__title__wrap
        label.post-write__title__label ì œëª©
        input(type="text" name="title" required).post-write__title__input
      .post-write__file__wrap
        label.post-write__file__label íŒŒì¼
        input(type="file" name="file").post-write__file__input
      .post-write__paragraph__wrap
        label.post-write__paragraph__label ë‚´ìš©
        textarea(name="paragraph" required).post-write__paragraph__input
      .post-write__submit__wrap
        button(type="submit" name="submit").post-write__submit__btn ì‘ì„±í•˜ê¸°

//- Bulletn Board Post List Template [ ê²Œì‹œíŒ ê¸€ ëª©ë¡ í…œí”Œë¦¿ ]
//- ğŸ’¥ ê²Œì‹œíŒ ê¸€ ëª©ë¡ í…œí”Œë¦¿ì€ 'ë¹ˆí˜ì´ì§€ë¡œ ì§„ì…í•˜ê³  í”„ë¡ íŠ¸ì—ì„œ API ìš”ì²­ì„í•´ì„œ ì‘ë‹µë°›ê³  í˜ì´ì§€ë¥¼ ì±„ìš°ëŠ” ë°©ë²•' ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
//- ì¦‰, ì„œë²„ì‚¬ì´ë“œì—ì„œ ê²Œì‹œê¸€ ëª©ë¡ì˜ ë¹ˆ í…œí”Œë¦¿ë§Œ ì œê³µí•˜ê³ , ë°ì´í„°ëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œì—ì„œ APIë¡œ ìš”ì²­ë©ë‹ˆë‹¤.
//- ê²Œì‹œê¸€ ëª©ë¡ ìš”ì²­ ëª¨ë“ˆì€ src/es6/common/function/post ì—ì„œ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
//- ê¸€ì“°ê¸° ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ëŠ” ê²Œì‹œíŒì´ë¼ë©´ ì¸ìë¥¼ ë„£ì–´ì£¼ì‹œê³  ì•„ë‹ˆë¼ë©´ ì•ˆ ë„£ìœ¼ì‹¬ ë©ë‹ˆë‹¤
//- ex) ê¸€ì“°ê¸° ê¸°ëŠ¥ ì‚¬ìš© ê²Œì‹œíŒ >> +postList(true, 'community/board')
//- ex) ê¸€ì“°ê¸° ê¸°ëŠ¥ ë¯¸ì‚¬ìš© ê²Œì‹œíŒ >> +postList()
mixin postList(usePostWrite = false, boardName)
  article.post-list
    |
    |
    // ê²Œì‹œíŒ ê¸€ ëª©ë¡ í—¤ë”
    section.post-list__header
      //- í‘œì‹œë  ê²Œì‹œê¸€ì˜ ì†ì„± = ['number', 'title', 'writer', 'hit', 'createdAt'];
      div.post-list__header__prop.post-list__header__number ë²ˆí˜¸
      div.post-list__header__prop.post-list__header__title ì œëª©
      div.post-list__header__prop.post-list__header__writer ì‘ì„±ì
      div.post-list__header__prop.post-list__header__hit ì¡°íšŒìˆ˜
      div.post-list__header__prop.post-list__header__createdAt ë“±ë¡ì¼
    |
    |
    // ê²Œì‹œíŒ ê¸€ ëª©ë¡
    section.post-list__posts
    |
    |
    // ê²Œì‹œíŒ ê¸€ ëª©ë¡ ë²„íŠ¼ë“¤
    section.post-list__btns
      // í˜ì´ì§€ë„¤ì´ì…˜
      section.post-list__inner-paging
        // í˜ì´ì§€ ë²ˆí˜¸ ë¦¬ìŠ¤íŠ¸
        ul.post-list__page-numbers
        // ë²„íŠ¼ë“¤
        div.post-list__page-btn.post-list__page-btn--left
          +icon("chevronBackward", 'ì´ì „ í˜ì´ì§€', '#0f0f0f')
        div.post-list__page-btn.post-list__page-btn--right
          +icon("chevronForward", 'ë‹¤ìŒ í˜ì´ì§€', '#0f0f0f')
      // TODO: ì œì¼ ì•ìœ¼ë¡œ ê°€ê¸°, ì œì¼ ë’¤ë¡œ ê°€ê¸° ë¶€ë¶„ êµ¬í˜„
      |
      |
      //- ê¸€ì“°ê¸° ê¸°ëŠ¥ì´ ì¡´ì¬í•˜ëŠ” ê²Œì‹œíŒì´ë¼ë©´
      - if(usePostWrite)
        // ê¸€ì“°ê¸° ë²„íŠ¼
        if user
          a(href= '/' + boardName + '/create').post-list__write-btn ê¸€ì“°ê¸°
        else
          p(style="text-align: right; font-weight: 600") ë¡œê·¸ì¸ì„ í•´ì„œ ê¸€ì„ ì‘ì„±í•˜ì„¸ìš”!

//- Bulletn Board Post View Template [ ê²Œì‹œíŒ ê¸€ ìƒì„¸ë³´ê¸° í…œí”Œë¦¿ ]
//- ğŸ’¥ ê²Œì‹œíŒ ê¸€ ìƒì„¸ë³´ê¸° í…œí”Œë¦¿ì€ 'url ì— ì¡´ì¬í•˜ëŠ” id ê°’ìœ¼ë¡œ ë°±ì—”ë“œì—ì„œ ì •ë³´ë¥¼ ì°¾ì•„ì„œ í…œí”Œë¦¿ ì—”ì§„ì— ì „ë‹¬í•´ì£¼ëŠ” ë°©ë²•' ìœ¼ë¡œ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.
//- ì¦‰, ì„œë²„ ì‚¬ì´ë“œì—ì„œ í•´ë‹¹í•˜ëŠ” í˜ì´ì§€ì˜ ë°ì´í„° ë Œë”ë§ì´ ëª¨ë‘ ëë‚œ í›„ ì œê³µë©ë‹ˆë‹¤. 

//- title, createdAt, writer, hit,
//- file,
//- ìƒì„¸ë³´ê¸°ì „ ê²Œì‹œê¸€ ì£¼ì†Œ (ex - community/board)
mixin postView(post, referrer, user)
  article.post-view
    mixin processDateTime(GMT)
      - const addTime = (hours, oldDate, newDate = new Date()) => {newDate.setTime(oldDate.getTime() + (hours * 60 * 60 * 1000)); return newDate;}
      - const yymmdd = (dateObj = new Date()) => dateObj.toISOString().match(/(?<=^\d{2})\d{2}-\d{2}-\d{2}(?=T)/)[0];
      - const hhmmss = (dateObj = new Date()) => dateObj.toISOString().match(/(?<=T)\d{2}:\d{2}:\d{2}/)[0];
      
      - const KST = addTime(9, GMT);
      - const createdDate = yymmdd(KST);
      - const createdTime = hhmmss(KST);
      - const today = yymmdd();

      - const displayedTime = createdDate === today ? createdTime : createdDate;

      div.post-view__header__prop.post-view__header__createdAt= displayedTime
    |
    |
    // ê²Œì‹œíŒ ê¸€ í—¤ë”
    section.post-view__header
      //- í—¤ë”ì— í‘œì‹œë  ê²Œì‹œê¸€ì˜ ì†ì„± = ['title', 'createdAt', 'writer', 'hit'];
      div.post-view__header__title= post.title
      +processDateTime(post.createdAt)
      div.post-view__header__prop.post-view__header__writer= post.UserId
      div.post-view__header__prop.post-view__header__hit= post.Inquiries[0].count
    // ê²Œì‹œíŒ ê¸€
    //- (ì»¨í…ì¸  ì–´ë–»ê²Œ ë˜ì ¸ì£¼ë‚˜ ë³´ê³  ê·¸ë‹¤ìŒ ê°€ê³µ ì˜ˆì •)
    section.post-view__content
      // ì²¨ë¶€ íŒŒì¼
      section.post-view__content__images
        each image in post.Images
          - const src = `https://www.ddccomputer.club/uploads/${image.src}`
          img(src= src style="max-width: 100%;").post-view__content__image
      section.post-view__content__txt= post.content
    // ê²Œì‹œíŒ ê¸€ í‘¸í„°
    section.post-view__footer
      -const boardPath = referrer.match(/^.*(?=\/\d)/)[0]; // regExp ex) '/community/board/14' => '/community/board'
      a(href= boardPath).post-view__footer__btn.post-view__footer__btn--board ëª©ë¡
      if user === post.UserId
        -const updatePath = `${referrer}/update?_method=PATCH`
        -const deletePath = `${referrer}/delete?_method=DELETE`
        form(action="" method="post").post-view__footer__form
          //- button(type="submit" name="" formmethod="" formaction= updatePath).post-view__footer__btn.post-view__footer__form--update ìˆ˜ì •í•˜ê¸°
          button(type="submit" name="" formaction= deletePath).post-view__footer__btn.post-view__footer__form--delete ì‚­ì œí•˜ê¸°
          //- TODO: ìˆ˜ì •í•˜ê¸° í…œí”Œë¦¿ ì™„ì„±ë˜ë©´ ì‚¬ìš©
    //- (ìœ„ì—ì„œ ë°›ì€ boardPathë¡œ postList ì‚½ì… ì˜ˆì •)